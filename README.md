# php-repository
Поиск проектов на Github, сохранение в локальную базу данных, вывод результатов на экран.

Технологии PHP, Bootstrap.

Описание
Для хранения локальных данных можно использовать MySql, MariaDB, PostgreSql. При разработке не использовались PHP фреймворки: yii2, symfony5, laravel8 или более новые.

Веб страница:

  Приложение, использует bootstrap4. На первой странице расположены: поле ввода текста, кнопка «Поиск».
  
Реализован следующий механизм:
1.	Пользователь вводит в поле поиска текст, нажимает кнопку «Поиск»
2.	Приложение производит поиск введенных данных по локальной бд
3.	Если данные не найдены, то производится отправка запроса на API Github  https://api.github.com/search/repositories?q=subject, где subject – введенный текст
4.	Полученный ответ сохраняется в локальную бд данных в формате: строка поиска, результат (json)
5.	Производится отдача страницы с результатами

При показе страницы с результатами сохранятся в поле поиска введенный текст.
Результаты выводится в виде карточек (bootstrap cards). В карточке отображатся:
•	Имя проекта 
•	Автор
•	Кол-во звезд (Stargazers)
•	Кол-во просмотров (Watchers)
При нажатии на карточку или ссылку "перейти" осуществлятся переход на репозиторий Github

REST API
Реализован REST API для:
1.	Осуществления поиска POST /api/find , строка поиска передается в теле (body) запроса. Механизм поиска такой же, как и при поиске со страницы в браузере.
2.	Просмотр списка поисков GET /api/find – выдает результаты в виде json массива с объектами, в составе которых:
•	Имя проекта 
•	Автор
•	Кол-во звезда (Stargazers)
•	Кол-во просмотров (Watchers)
•	Ссылка на репозиторий
3.	Реализована функция сброса результатов поиска по поисковой строке DELETE /api/find/{id}, где {id} – идентификатор поиска. 
Например запрос через curl: curl -X DELETE -d '3' --url https://ваш сервер/api/find
После выполнения отдается (json) со статусом операции. Для включения методов DELETE, PUT на сервере nginx необходимо в настройке conf файла сервера исправить и добавить строку:
index index.html index.htm; //здесь убираем index.php
эту строку добавляем.
try_files $uri /index.php$is_args$args;
При этом приходится в адресной строке явно указывать файл index.php, например: curl -X DELETE -d '3' --url https://ваш сервер/api/find/index.php

Информация при настройке приложения:
  В приложении реализован метод автоматической подгрузки классов. /includes/autoload.php
$class_dir - указывается каталог где храняться классы, далее происходит рекурсивный поиск класса в самом каталоге и его подкаталагах.
Важно!:имя файла класса должно быть таким же как и имя класса! Регистр имени файла не важен!

  При подключении к БД реализован механизм проверки существоавания указанной в настройках базы. Если база не создана то создается, далее происходит аналогичное действие по проверке и подключению mysql(таблицы)/pgsql(схемы.таблицы) БД. 

Спасибо за внимание.
